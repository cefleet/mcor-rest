var fs = require('fs');
var adapter = config.db.adapter;
var conInfo = config.db.connection_info;

var action = function(action, table, params, callback){
	fs.exists(__dirname+'/lib/adapters/'+adapter+'/'+action+'.js', function(exists){
		if(exists){
			var thisAction = require('./lib/adapters/'+adapter+'/'+action);
			
			var returnAction = function(err, value){
				callback(err,value);
			}
			
			thisAction(conInfo, table, params, returnAction);	
		
		} else {
			callback('Action Not Found: There is no action named "'+action+'" for the adapter "'+adapter+'"', null);	
		}
	})
	
}

module.exports.action = action;
