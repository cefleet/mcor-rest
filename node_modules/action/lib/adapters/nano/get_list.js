var get_list = function(conString,table,params,callback){
//test		
	//TODO this could be a little different	
	var nano = require('nano')(conString);
	var db = nano.use(config.db.database_name);
	//TODO this is just the very basic for the current needs. It will need to be putdated regularly
    console.log(params);
    var view = 'get_all';
    if(params.view){
        view = params.view || 'get_all';
    }
	db.view(table, view, function(err, body){		
		var rows = [];
		if (!err) {
    		body.rows.forEach(function(doc) {
    			doc.value.id = doc.value._id;
    	  		rows.push(doc.value);
    		});
    		callback(null,rows);
  		} else {
  			console.log(err);
  		}
	});
};

module.exports = get_list;

